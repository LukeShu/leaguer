<%= form_for(@tournament) do |f| %>
  <%= render "common/error_messages", :target => @tournament %>
  <%= f.hidden_field(:game_id) %>

  <% @game = Game.find(params[:game]) %>
  <% @tournament.attributes.each do |name, value| %>
    <% if (name == "id") or (name =~ /.*_at$/) or (name == "game_id") or (name == "status") or (name == "set_rounds") %>
      <% next %>
    <% end %>
    <p>
      <%= f.label name %><br>
      <% if !@game.attributes[name].nil? %>
        <%= f.text_field(name, :value => @game.attributes[name] ) %>
      <% else %>
        <%= f.text_field name %>
      <% end  %>
    </p>
  <% end %>

  <%= fields_for "tournament[preferences]", @tournament.preferences do |setting_fields|  %>
    <% @game.settings.each do |setting| %>
      <% case setting.stype %>
        <% when 0 %>
           <%= setting_fields.text_field( setting.name, :name ) %>
        <% when 1 %>
           <%# setting_fields.text_area( setting.name, setting.name ) %>
        <% when 2 %>
           <%# setting_fields.collection_radio_buttons( setting.name, setting.type_opt.split(',') ) %>
        <% when 3 %>
           <%= setting_fields.collection_check_boxes( setting.name, setting.type_opt.split(',') ) %>
        <% when 4 %>
           <%= setting_fields.radio_button( setting.name, "true" ) %>
           <%= setting_fields.radio_button( setting.name, "false" ) %>
        <% when 5 %>
           <%= setting_fields.select( setting.name, setting.type_opt.split(',') ) %>
        <% end %>
      <% end %>
    <% end %>
  <%= f.submit %>
<% end %>
