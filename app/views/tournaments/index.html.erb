<h1>Listing Tournaments</h1>

<% if @tournaments.length > 0 %>
  <div id="tournament-list">
    
    <%# Each tournament has a div for its listing %>
    <% @tournaments.each do |t| %>
      <div class="row tournament-listing">
          <div class="col-md-2 "><%= image_tag 'http://www.gravatar.com/avatar/' + Digest::MD5.hexdigest(t.hosts.first.email) + '?s=100&d=mm' %></div>
          

          <div class="col-md-8">
            <%# "header" %>
            <%= link_to(t) do %>
              <h3><%= t.name %></h3>
            <% end %>

             <div class="row" style="margin-left:2%;">
              <div class="col-md-4 host">
               Hosted by: <%= t.hosts.first.name %>
              </div>
              <div class="col-md-4 things">
                <p> Players per team: <%= t.min_players_per_team %></p>
                <p> Players signed up: <%= t.players.count %> </p>
              </div>
              <div class="col-md-4 things">
                <p> <%= (t.randomized_teams)? "Teams are Random" : "Teams are Chosen" %></p>
                <p> Players signed up: <%= t.players.count %> </p>
              </div>
            </div> 
          
          </div>
          

          <div class="col-md-2">
            <%# If this guy is logged in AND not in the tournament %>
            <% if signed_in? && !t.players.include?(current_user) %>
              <%= form_tag(tournament_path(t), method: "put") do %>
                <input type="hidden" name="update_action" value="join">
                  <%= submit_tag("Join") %>
                <% end %>
            <% else %>
              <p style="margin-top:10px;"> You've signed up for this tournament! </p>
            <% end %>
          </div>

      </div>
    <% end %>

  </div>
<% else %>
  <p class="no-entries"> No tournaments going on right now... Why not start your own? </p>
<% end %>
<br>

<%= link_to 'New Tournament',  new_tournament_path, :class => "btn btn-warning btn-lg" %>
